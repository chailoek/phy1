(self.webpackChunkjupyterlab_tabular_data_editor=self.webpackChunkjupyterlab_tabular_data_editor||[]).push([[777],{777:(t,e,o)=>{"use strict";o.r(e),o.d(e,{CommandIDs:()=>st,DARK_EXTRA_STYLE:()=>ot,LIGHT_EXTRA_STYLE:()=>et,SIZES:()=>Z,default:()=>q});var n,s=o(475),i=o(441),r=o(855),a=o(989),l=o(390),d=o(919),c=o(419),h=o(401),u=o(275),g=o(353),m=o(797),_=o(168),p=o(510),w=o(973),C=o(850),b=o(114);class y extends h.MutableDataModel{constructor(t){super(),this._onChangeSignal=new _.Signal(this),this._saving=!1,this._ghostsRevealed=!0,this._isDataFormatted=!1,this._isDataFormattedChanged=new _.Signal(this),""===t.data&&(t.data="Column 1"),this._model=new w.DSVModel(t),this._model.changed.connect(this._receiveModelSignal,this),this._rowsAdded=0,this._columnsAdded=0,this._rowsRemoved=0,this._columnsRemoved=0,this._litestore=null}get ghostsRevealed(){return this._ghostsRevealed}set ghostsRevealed(t){this._ghostsRevealed=t}get model(){return this._model}get onChangedSignal(){return this._onChangeSignal}get litestore(){return this._litestore}set litestore(t){this._litestore=t}get dataTypes(){return this._dataTypes?this._dataTypes:Array(this.totalColumns).fill({type:"string"})}set dataTypes(t){this._dataTypes=t}rowCount(t){const e=this._ghostsRevealed?1:0;return"body"===t?this._model.rowCount("body")+this._rowsAdded-this._rowsRemoved+e:1}columnCount(t){const e=this._ghostsRevealed?1:0;return"body"===t?this._model.columnCount("body")+this._columnsAdded-this._columnsRemoved+e:1}get totalRows(){return this._model.rowCount("body")+this._rowsAdded-this._rowsRemoved+1}get totalColumns(){return this._model.columnCount("body")+this._columnsAdded-this._columnsRemoved}get isDataFormatted(){return this._isDataFormatted}set isDataFormatted(t){this._isDataFormatted!==t&&(this._isDataFormatted=t,this._dataTypes=this.resetMetadata(),this._isDataFormattedChanged.emit(null))}get isDataFormattedChanged(){return this._isDataFormattedChanged}metadata(t,e,o){return this.dataTypes[o]}resetMetadata(){const t=new Array(this.totalColumns);if(!this._isDataFormatted)return t.fill({type:"string"}),t;const e=Math.min(this.totalRows-1,500),o=new Array(e);for(let s=0;s<this.totalColumns;s++)t:{for(let i=0;i<e;i++){let e=this.data("body",i,s);if(e=n.boolyCheck(e.toString()),""===e){const e="string";t[s]={type:e};break t}o[i]=e}const i=(0,b.inferType)(o);t[s]={type:i}}return t}data(t,e,o){if("row-header"===t)return e+1===this.rowCount("body")?"":this._model.data(t,e,o);if("corner-header"===t)return;e=this._absoluteIndex(e,t);const{rowMap:n,columnMap:s,valueMap:i}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID});if(e=n[e],o=s[o],void 0===e||void 0===o)return"";if(void 0!==i[`${e},${o}`])return i[`${e},${o}`];if(e<0||o<0)return"";e=this._regionIndex(e,t);const r=this._model.data(t,e,o);return"true"===r||"false"!==r&&r}setData(t,e,o,n,s=1,i=1,r=null){e=this._absoluteIndex(e,t);const{rowMap:a,columnMap:l}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID}),d=a.length,c=l.length,h={};if(null===r){r={},h[`${a[e]},${l[o]}`]=n,r.valueUpdate=h;const u={type:"cells-changed",region:t,row:e=this._regionIndex(e,t),column:o,rowSpan:s,columnSpan:i},g={currentRows:d,currentColumns:c,nextChange:u};return r.gridStateUpdate=g,this.emitChanged(u),this._onChangeSignal.emit(r),!0}{let u,g,m;n=Array.isArray(n)?n:[[n]];for(let t=0;t<s;t++){u=a[e+t];for(let e=0;e<i;e++)g=l[o+e],m=`${u},${g}`,h[m]=n[t][e]}r.valueUpdate=h;const _={type:"cells-changed",region:t,row:e=this._regionIndex(e,t),column:o,rowSpan:s,columnSpan:i},p={currentRows:d,currentColumns:c,nextChange:_};return r.gridStateUpdate=p,this.emitChanged(_),!0}}bulkSetData(t,e,o){const n={},{rowMap:s,columnMap:i}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID}),r=s.length,a=i.length;let l,d;const c={};for(let n=0;n<=s.length;n++)l=s[this._absoluteIndex(t[n],"body")],d=i[e[n]],c[`${l},${d}`]=o;n.valueUpdate=c;const h={type:"model-reset"},u={currentRows:r,currentColumns:a,nextChange:h};return n.gridStateUpdate=u,this.emitChanged(h),n}addRows(t,e,o=1){const n={};e=this._absoluteIndex(e,t);const{rowMap:s,columnMap:i}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID}),r=s.length,a=i.length,l=[];let d=0;for(;d<o;)l.push(-(this.totalRows+this._rowsRemoved)),d++,this._rowsAdded++;const c={index:e,remove:0,values:l};n.rowUpdate=c;const h={type:"rows-inserted",region:"body",index:e=this._regionIndex(e,t),span:o},u={currentRows:r,currentColumns:a,nextChange:h};return n.gridStateUpdate=u,this.emitChanged(h),n}addColumns(t,e,o=1){const n={},{columnMap:s,rowMap:i}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID}),r=i.length,a=s.length,l=[],d={};let c,h=0;for(;h<o;)c=-(this.totalColumns+this._columnsRemoved),l.push(c),d[`0,${c}`]=`Column ${e+h+1}`,h++,this._columnsAdded++;n.valueUpdate=d;const u={index:e,remove:0,values:l};n.columnUpdate=u;const g={type:"columns-inserted",region:"body",index:e,span:o},m={currentRows:r,currentColumns:a,nextChange:g};return n.gridStateUpdate=m,this.emitChanged(g),n}removeRows(t,e,o=1){const n={};e=this._absoluteIndex(e,t);const{columnMap:s,rowMap:i}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID}),r=i.length,a=s.length,l={index:e,remove:o,values:[]};n.rowUpdate=l,this._rowsRemoved+=o;const d={type:"rows-removed",region:"body",index:e=this._regionIndex(e,t),span:o},c={currentRows:r,currentColumns:a,nextChange:d};return n.gridStateUpdate=c,this.emitChanged(d),n}removeColumns(t,e,o=1){const n={},{rowMap:s,columnMap:i}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID}),r=s.length,a=i.length,l={index:e,remove:o,values:[]};n.columnUpdate=l,this._columnsRemoved+=o;const d={type:"columns-removed",region:"body",index:e,span:o},c={currentRows:r,currentColumns:a,nextChange:d};return n.gridStateUpdate=c,this.emitChanged(d),n}moveRows(t,e,o,n){const s={};if((e=this._absoluteIndex(e,t))===(o=this._absoluteIndex(o,t)))return;const{rowMap:i,columnMap:r}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID}),a=i.length,l=r.length,d=this.rowMapSplice(i,e,o,n);s.rowUpdate=d;const c={type:"rows-moved",region:"body",index:e=this._regionIndex(e,t),span:n,destination:o=this._regionIndex(o,t)},h={currentRows:a,currentColumns:l,nextChange:c};return s.gridStateUpdate=h,this.emitChanged(c),s}rowMapSplice(t,e,o,n){const s=t.slice(e,e+n);let i;switch(e<o?"down":"up"){case"down":i=o-n+1;break;case"up":i=o}return[{index:e,remove:n,values:[]},{index:i,remove:0,values:s}]}moveColumns(t,e,o,n){const s={};if(e===o)return;const{columnMap:i,rowMap:r}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID}),a=r.length,l=i.length,d=this.columnMapSplice(i,e,o,n);s.columnUpdate=d;const c={type:"columns-moved",region:"body",index:e,span:n,destination:o},h={currentRows:a,currentColumns:l,nextChange:c};return s.gridStateUpdate=h,this.emitChanged(c),s}columnMapSplice(t,e,o,n){const s=t.slice(e,e+n);let i;switch(e<o?"right":"left"){case"right":i=o-n+1;break;case"left":i=o}return[{index:e,remove:n,values:[]},{index:i,remove:0,values:s}]}clearCells(t,e){const o={},{r1:n,r2:s,c1:i,c2:r}=e,a=Math.min(n,s),l=Math.abs(n-s)+1,d=Math.min(i,r),c=Math.abs(i-r)+1,h=new Array(l).fill(0).map((t=>new Array(c).fill("")));return this.setData("body",a,d,h,l,c,o),o}clearRows(t,e,o=1){const n={};e=this._absoluteIndex(e,t);const{rowMap:s,columnMap:i}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID}),r=s.length,a=i.length,l=[];let d=0;for(;d<o;)l.push(-(this.totalRows+this._rowsRemoved)),d++,this._rowsAdded++;this._rowsRemoved+=o;const c={index:e,remove:o,values:l};n.rowUpdate=c,e=this._regionIndex(e,t),this.emitChanged({type:"model-reset"});const h={currentRows:r,currentColumns:a,nextChange:{region:t,type:"cells-changed",row:e,rowSpan:o,column:0,columnSpan:a}};return n.gridStateUpdate=h,n}clearColumns(t,e,o=1){const n={},{columnMap:s,rowMap:i}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID}),r=i.length,a=s.length,l=[];let d=0;for(;d<o;)l.push(-(this.totalColumns+this._columnsAdded)),d++,this._columnsAdded++;this._columnsRemoved+=o;const c={index:e,remove:o,values:l};n.columnUpdate=c,this.emitChanged({type:"model-reset"});const h={currentRows:r,currentColumns:a,nextChange:{region:t,type:"cells-changed",row:0,rowSpan:r,column:e,columnSpan:o}};return n.gridStateUpdate=h,n}cut(t,e,o,n,s){return this.copy("body",e,o,n,s),this.clearCells("body",{r1:e,r2:n,c1:o,c2:s})}copy(t,e,o,n,s){const i=Math.abs(e-n)+1,r=Math.abs(o-s)+1;this._clipboard=new Array(i).fill(0).map((t=>new Array(r).fill(0)));for(let n=0;n<i;n++)for(let s=0;s<r;s++)this._clipboard[n][s]=this.data(t,e+n,o+s)}paste(t,e,o,n=null){const s={};null!==n&&(this._clipboard=n.split("\n").map((t=>t.split("\t")))),e=this._absoluteIndex(e,t);const i=this.totalRows-e,r=this.totalColumns-o,a=Math.min(i,this._clipboard.length),l=Math.min(r,this._clipboard[0].length);return e=this._regionIndex(e,t),this.setData("body",e,o,this._clipboard,a,l,s),s}emitOppositeChange(t){const e=t.nextChange;if(!e)return;let o;switch(e.type){case"model-reset":o={type:"model-reset"};break;case"cells-changed":o="clear-rows"===t.nextCommand||"clear-columns"===t.nextCommand?{type:"model-reset"}:{type:"cells-changed",region:e.region,row:e.row,column:e.column,rowSpan:e.rowSpan,columnSpan:e.columnSpan};break;case"rows-inserted":o={type:"rows-removed",region:"body",index:e.index,span:e.span},this._rowsRemoved+=o.span;break;case"columns-inserted":o={type:"columns-removed",region:"body",index:e.index,span:e.span},this._columnsRemoved+=e.span;break;case"rows-removed":o={type:"rows-inserted",region:"body",index:e.index,span:e.span},this._rowsAdded+=o.span;break;case"columns-removed":o={type:"columns-inserted",region:"body",index:e.index,span:e.span},this._columnsAdded+=o.span;break;case"rows-moved":o={type:"rows-moved",region:"body",index:e.destination,destination:e.index,span:e.span};break;case"columns-moved":o={type:"columns-moved",region:"body",index:e.destination,destination:e.index,span:e.span}}this.emitChanged(o),this.onChangedSignal.emit(null)}emitCurrentChange(t){switch(t.type){case"columns-inserted":this._columnsAdded+=t.span;break;case"columns-removed":this._columnsRemoved+=t.span;break;case"rows-inserted":this._rowsAdded+=t.span;break;case"rows-removed":this._rowsRemoved+=t.span}this.emitChanged(t),this.onChangedSignal.emit(null)}updateString(){this._saving=!0;const{rowMap:t,columnMap:e,valueMap:o}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID}),n=t.length+this._rowsRemoved,s=e.length+this._columnsRemoved,[i,r]=this._invertMaps(n,s),a=this._model.rawData,l=this._serializer(t,e,o,i,r);return this._model.rawData=a,this._model.parseAsync(),this._model.ready.then((()=>this._saving=!1)),l}_invertMaps(t,e){const o=(0,C.toArray)((0,C.range)(0,t)),n=(0,C.toArray)((0,C.range)(0,e)),s=[...this._litestore.transactionStore.undoStack];let i,r,a,l,d=[];for(;s.length>0;){i=s.pop();const t=this._litestore.getTransaction(i).patch[G.SCHEMA_ID][G.RECORD_ID].gridState;if(!t.value)continue;const{currentRows:e,currentColumns:c,nextChange:h,nextCommand:u}=t.value;if(u)switch(u){case"insert-rows-above":case"insert-rows-below":r=h,a=this._absoluteIndex(r.index,r.region),d=o.splice(a,r.span),o.splice(e,0,...d);break;case"insert-columns-left":case"insert-columns-right":r=h,d=n.splice(r.index,r.span),n.splice(c,0,...d);break;case"remove-rows":r=h,a=this._absoluteIndex(r.index,r.region),d=o.splice(o.length-r.span,r.span),o.splice(a,0,...d);break;case"remove-columns":r=h,d=n.splice(n.length-r.span,r.span),n.splice(r.index,0,...d);break;case"move-rows":r=h,a=this._absoluteIndex(r.index,r.region),l=this._absoluteIndex(r.destination,r.region),d=o.splice(l,r.span),o.splice(a,0,...d);break;case"move-columns":r=h,d=n.splice(r.destination,r.span),n.splice(r.index,0,...d);break;case"clear-rows":r=h,a=this._absoluteIndex(r.row,r.region),d=o.splice(a,r.rowSpan),o.splice(e-r.rowSpan,0,...d),d=o.splice(o.length-r.rowSpan,r.rowSpan),o.splice(a,0,...d);break;case"clear-columns":r=h,d=n.splice(r.column,r.columnSpan),n.splice(c-r.columnSpan,0,...d),d=n.splice(n.length-r.columnSpan,r.columnSpan),n.splice(r.row,0,...d)}}return[o,n]}_absoluteIndex(t,e){return"column-header"===e||"corner-header"===e?0:t+1}_regionIndex(t,e){return"column-header"===e?0:t-1}_receiveModelSignal(t,e){if(!this._saving&&"rows-inserted"===e.type){const{rowMap:t}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID}),o=t.length+this._rowsRemoved,n=e.span;this._assimilateNewRows(o,n)}}_assimilateNewRows(t,e){const o={},{rowMap:n,columnMap:s}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID}),i=n.length,r=s.length,a=(0,C.toArray)((0,C.range)(t,e+t)),l={index:n.length,remove:0,values:a};o.rowUpdate=l;const d={type:"rows-inserted",region:"body",index:t,span:e},c={currentRows:i,currentColumns:r,nextChange:d,nextCommand:"init"};o.gridStateUpdate=c,this._onChangeSignal.emit(o),this.emitChanged(d)}_stringRows(){return this.model.doneParsing||console.log("The rows of the string have been requested while \n        the model is still parsing which will likely produce undesired behavior."),this._model.rowCount("body")+1}_stringColumns(){return this.model.doneParsing||console.log("The columns of the string have been requested while \n      the model is still parsing which will likely produce undesired behavior."),this._model.columnCount("body")}_rowEnd(t){const e=this._stringRows(),o=this._model.rowDelimiter.length;return t+1<e?this._model.getOffsetIndex(t+1,0)-o:this._model.rawData.length}_openSlice(t,e,o){if(o+1<this._stringColumns()){const n=this._model.delimiter.length;return this._model.rawData.slice(this._model.getOffsetIndex(t,e),this._model.getOffsetIndex(t,o+1)-n)}return this._model.rawData.slice(this._model.getOffsetIndex(t,e),this._rowEnd(t))}_columnSlicePattern(t){let e=0;const o=[],n=[];let s=[],i=0;for(;e<t.length;){for(;t[e]<0;)e++,i++;if(e===t.length&&i--,o.push(this._model.delimiter.repeat(i)),i=0,e>=t.length)break;for(s.push(t[e]);t[e]+1===t[e+1];)e++;s.push(t[e]),i++,n.push(s),s=[],e++}return o.push(""),{buffers:o,slices:n}}_performMacroSlice(t,e,o){const n=new Array(e.length).fill(0),{buffers:s,slices:i}=t;return n.map(((t,n)=>{const r=e[n];if(r<0)return this._blankRow(o);let a=s[0];for(let t=0;t<i.length;t++)a+=this._openSlice(r,i[t][0],i[t][1])+s[t+1];return a})).join(this._model.rowDelimiter)}_serializer(t,e,o,n,s){const i=this._columnSlicePattern(e);this._model.rawData=this._performMacroSlice(i,t,e);const r=this.model.initialRows;return this.model.initialRows=t.length,this._model.parseAsync(),this._model.initialRows=r,this._model.rawData=this._peformMicroSlice(o,t,e,n,s),this._model.rawData}_blankRow(t){return this._model.delimiter.repeat(t.length-1)}_peformMicroSlice(t,e,o,n,s){let i=Object.keys(t).map((t=>t.split(",").map((t=>Math.abs(parseFloat(t))))));if(0===i.length)return this._model.rawData;if(i=i.map((t=>[n[t[0]],s[t[1]]])),i=i.sort(((t,e)=>t[0]*o.length+t[1]-(e[0]*o.length+e[1]))),i=i.filter((t=>t[0]<e.length&&t[1]<o.length)),0===i.length)return this._model.rawData;const r=i.map((t=>`${e[t[0]]},${o[t[1]]}`)),a=new Array(i.length-1).fill(""),l=this.model.rowDelimiter.length,d=this.model.delimiter.length,c=this._model.rawData.slice(0,this.model.getOffsetIndex(i[0][0],i[0][1]));let h;const u=i[i.length-1];h=u[1]+1===o.length?u[0]+1===e.length?"":this._model.rawData.slice(this._model.getOffsetIndex(u[0]+1,0)-l,this._model.rawData.length):this.model.rawData.slice(this._model.getOffsetIndex(u[0],u[1]+1)-d);const g=t[r[r.length-1]];return c+a.map(((e,n)=>{let s;const a=i[n],c=i[n+1];s=a[1]+1===o.length?this.model.getOffsetIndex(a[0]+1,0)-l:this.model.getOffsetIndex(a[0],a[1]+1)-d;const h=this.model.getOffsetIndex(c[0],c[1]);return t[r[n]]+this.model.rawData.slice(s,h)})).join("")+g+h}}!function(t){t.boolyCheck=function(t){return!!["true","yes","done","complete"].includes(t.toLowerCase())||!["false","no","not done","incomplete","to-do"].includes(t.toLowerCase())&&t}}(n||(n={}));var S=o(513),f=o(462);function v(t,e,o,n,s,i,r=null,a="line"){const l=e-t,d=n-o,c=s-o,h=i-t,u="line"===a?function(t,e){return f.VirtualDOM.realize(f.h.div({className:"lm-DataGrid-select-line",style:{width:`${e}px`,height:`${t}px`}}))}(l,d):function(t,e){return f.VirtualDOM.realize(f.h.div({className:"lm-DataGrid-select-shadow",style:{width:e.toString()+"px",height:t.toString()+"px"}}))}(l,d),g=new M({mimeData:new m.MimeData,dragImage:u,proposedAction:"move",boundingRegion:r,mouseOffsetX:c,mouseOffsetY:h});return g.start(s,i).then((()=>{})),g}class M extends S.Drag{constructor(t){super(t),this._boundingRegion=t.boundingRegion,this._mouseOffsetX=t.mouseOffsetX,this._mouseOffsetY=t.mouseOffsetY,this._initializing=!0,this.moveDragImage}moveDragImage(t,e){if(this.dragImage&&(this._boundingRegion||this._initializing)){const{left:o,top:n}=this.bound(t,e),s=this.dragImage.style;s.left=`${o}px`,s.top=`${n}px`,this._initializing=!1}}bound(t,e){let o=t-this._mouseOffsetX,n=e-this._mouseOffsetY;if(!this._boundingRegion)return{left:o,top:n};const{topBound:s,bottomBound:i,leftBound:r,rightBound:a}=this._boundingRegion,l=this.dragImage.style,d=parseFloat(l.width),c=parseFloat(l.height);return o=Math.max(r,Math.min(o,a-d)),n=Math.max(s,Math.min(n,i-c)),{left:o,top:n}}manualPositionUpdate(t,e){if(this._boundingRegion)return;const o=this.dragImage.style;t&&(o.left=`${t}px`),e&&(o.top=`${e}px`)}}class x extends h.TextCellEditor{getCellInfo(t){const{grid:e,row:o,column:n}=t,s=e.dataModel.data("column-header",o,n),i=e.headerWidth-e.scrollX+e.columnOffset("body",n),r=e.columnSize("body",n);return{grid:e,row:o,column:n,data:s,x:i,y:0,width:r,height:e.headerHeight}}updatePosition(){const t=this.cell.grid,e=this.getCellInfo(this.cell),o=t.headerHeight,n=t.headerWidth;this.viewportOccluder.style.top="0px",this.viewportOccluder.style.left=n+"px",this.viewportOccluder.style.width=t.viewportWidth-n+"px",this.viewportOccluder.style.height=t.viewportHeight-o+"px",this.viewportOccluder.style.position="absolute",this.editorContainer.style.left=e.x-1-n+"px",this.editorContainer.style.top=e.y+"px",this.editorContainer.style.width=e.width+1+"px",this.editorContainer.style.height=o+1+"px",this.editorContainer.style.visibility="visible",this.editorContainer.style.position="absolute"}}class R extends h.TextRenderer{constructor(t){super(t),this._headerIndent=t.indent,this._dataDetection=t.dataDetection}paint(t,e){if(this._dataDetection){let o=e.x;return o+=this._headerIndent,void super.paint(t,Object.assign(Object.assign({},e),{x:o}))}super.paint(t,e)}}class D extends h.BasicMouseHandler{constructor(t){super(),this._mouseUpSignal=new _.Signal(this),this._ghostHoverSignal=new _.Signal(this),this._grid=t.grid,this._cursor=null}get hoverSignal(){return this._ghostHoverSignal}get mouseUpSignal(){return this._mouseUpSignal}computeGridBoundingRegion(){const t=this._grid,{left:e,top:o}=this._grid.viewport.node.getBoundingClientRect(),n=e+t.headerWidth,s=n+Math.min(t.pageWidth,t.bodyWidth-t.ghostColumnWidth-t.scrollX),i=o+t.headerHeight;return{topBound:i,bottomBound:i+Math.min(t.pageHeight,t.bodyHeight-t.ghostRowHeight-t.scrollY),leftBound:n,rightBound:s}}cursorForHandle(t){const{region:e,row:o,column:n}=this._grid.hitTest(this._event.clientX,this._event.clientY),s=this._grid.dataModel;if(o===s.totalRows-1||n===s.totalColumns)return this._cursor="pointer";const i={top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom:"ns-resize",none:this.cursorByRegion(e,o,n)};return this._cursor=i[t],this._cursor}cursorByRegion(t,e,o){switch(t){case"row-header":return this._grid.selectionModel.isRowSelected(e)?"grab":"default";case"column-header":return this._grid.selectionModel.isColumnSelected(o)?"grab":"default";default:return"default"}}onMouseHover(t,e){const{row:o,column:n}=t.hitTest(e.clientX,e.clientY);let s=null;s=o===t.dataModel.rowCount("body")-1?"ghost-row":n===t.dataModel.columnCount("body")-1?"ghost-column":null,this._currentHoverRegion!==s&&this.hoverSignal.emit(s),this._currentHoverRegion=s,this._event=e,super.onMouseHover(t,e)}onMouseDown(t,e){const o=t.dataModel;if("mousedown"===e.type&&this._currentHoverRegion){const e=t.selectionModel.currentSelection();let n;switch(this._currentHoverRegion){case"ghost-row":n=o.addRows("body",o.rowCount("body")-1);break;case"ghost-column":n=o.addColumns("body",o.columnCount("body")-1)}return n.selection=e,o.onChangedSignal.emit(n),void t.selectCells(e)}super.onMouseDown(t,e),"mousedown"===e.type&&"grab"===this._cursor&&(this._cursor="grabbing",this.handleGrabbing())}release(){this._moveData&&(this._moveData.override.dispose(),this._moveData=null),super.release()}handleGrabbing(){const t=this._grid.hitTest(this._event.clientX,this._event.clientY),{region:e,row:o,column:n}=t;switch(e){case"column-header":this._selectionIndex=n;break;case"row-header":this._selectionIndex=o}const s=this.getRowOrColumnSection();let{topSide:i,bottomSide:r,leftSide:a,rightSide:l}=s;const d=this.computeGridBoundingRegion();switch(v(i,r,a,l,this._event.clientX,this._event.clientY,d,"shadow"),e){case"column-header":a-=1,l=a+2;break;case"row-header":i-=1,r=i+2}if(this._moveLine=v(i,r,a,l,this._event.clientX,this._event.clientY),"void"===e)return;const c=S.Drag.overrideCursor("grabbing");this._moveData={type:"move",region:e,row:o,column:n,override:c,localX:-1,localY:-1,timeout:-1}}getRowOrColumnSection(){const t=this._grid;let{left:e,top:o}=t.viewport.node.getBoundingClientRect();e+=t.headerWidth,o+=t.headerHeight;const n=e-t.scrollX,s=o-t.scrollY,i=this._grid.selectionModel.currentSelection();let{r1:r,c1:a,r2:l,c2:d}=i;r>l&&([r,l]=[l,r]),a>d&&([a,d]=[d,a]);let c=n+t.columnOffset("body",a),h=s+t.rowOffset("body",r),u=n+t.columnOffset("body",d+1),g=s+t.rowOffset("body",l+1);return c=Math.max(e,c),h=Math.max(o,h),u=Math.min(e+t.pageWidth,u),g=Math.min(o+t.pageHeight,g),{topSide:h,bottomSide:g,leftSide:c,rightSide:u}}onMouseMove(t,e){this._moveData?this.updateLinePosition(e):super.onMouseMove(t,e)}updateLinePosition(t){const{region:e,row:o,column:n}=this._moveData;let{left:s,top:i}=this._grid.viewport.node.getBoundingClientRect();s+=this._grid.headerWidth,i+=this._grid.headerHeight;const{vx:r,vy:a}=this._grid.mapToVirtual(t.clientX,t.clientY);let l=this._grid.columnAt("body",r),d=this._grid.rowAt("body",a);const c=this._grid.dataModel.rowCount("body")-2,h=this._grid.dataModel.columnCount("body")-2;switch(d>c&&(d=c),l>h&&(l=h),e){case"row-header":{const t=o<d?this._grid.rowOffset("body",d+1)-this._grid.scrollY:this._grid.rowOffset("body",d)-this._grid.scrollY;this._moveLine.manualPositionUpdate(null,t+i-1.5),this._selectionIndex=d;break}case"column-header":{const t=n<l?this._grid.columnOffset("body",l+1)-this._grid.scrollX:this._grid.columnOffset("body",l)-this._grid.scrollX;this._moveLine.manualPositionUpdate(t+s-1.5,null),this._selectionIndex=l;break}}}onMouseUp(t,e){this._event=e;const o=t.dataModel,n=t.hitTest(e.clientX,e.clientY);if(this._mouseUpSignal.emit(n),this._moveData){const e=this._grid.selectionModel,{r1:n,r2:s,c1:i,c2:r}=e.currentSelection();let a;if("column-header"===this._moveData.region){const e=this._moveData.column,i=this._selectionIndex;a=o.moveColumns("body",e,i,1),t.selectCells({r1:n,r2:s,c1:i,c2:i})}else if("row-header"===this._moveData.region){const e=this._moveData.row,n=this._selectionIndex;a=o.moveRows("body",e,n,1),t.selectCells({r1:n,r2:n,c1:i,c2:r})}a&&(a.selection={r1:n,r2:s,c1:i,c2:r},o.onChangedSignal.emit(a))}this.release()}onContextMenu(t,e){const{clientX:o,clientY:n}=e,s=t.hitTest(o,n);this._mouseUpSignal.emit(s),this._grid.selectionModel.isRowSelected(s.row)&&this._grid.selectionModel.isColumnSelected(s.column)||this.onMouseDown(t,e)}onMouseDoubleClick(t,e){const{region:o,row:n,column:s}=t.hitTest(e.clientX,e.clientY),i=n===t.dataModel.rowCount("body")-1,r=s===t.dataModel.columnCount("body")-1;if(!i&&!r){if("column-header"===o&&t.editable){const e={grid:t,row:n,column:s},o=t=>{const e=t.cell;if(!e)return;const o=e.grid;o.dataModel.setData("column-header",e.row,e.column,t.value),o.viewport.node.focus(),"none"!==t.cursorMovement&&(o.moveCursor(t.cursorMovement),o.scrollToCursor())},i=new x;t.editorController.edit(e,{editor:i,onCommit:o})}super.onMouseDoubleClick(t,e)}}}function H(t,e="ABCDEFGHIJKLMNOPQRSTUVWXYZ"){let o="";for(;t>=1;){let n=t%e.length;t/=e.length,n-1==-1&&(n=e.length,t--),o=e.charAt(n-1)+o}return o}class I{constructor(t){this._matches=[],this._changed=new _.Signal(this),this._grid=t,this._query=null,this._row=0,this._column=-1}get changed(){return this._changed}get row(){return this._row-1}get column(){return this._column}get matches(){return this._matches}get currentMatch(){return this._currentMatch}cellBackgroundColorRendererFunc(t){return({value:e,row:o,column:n})=>(e=String(e),this._query&&e&&e.match(this._query)?this._currentMatch.line===o&&this._currentMatch.column===n?t.currentMatchBackgroundColor:t.matchBackgroundColor:"")}clear(){this._query=null,this._row=0,this._column=-1,this._changed.emit(void 0)}find(t,e=!1){if(!t)return!1;const o=this._grid.dataModel,n=o.rowCount("body"),s=o.columnCount("body");this._query!==t&&(this._row=0,this._column=-1,this._matches=[]),this._query=t;const i=this._grid.scrollY/this._grid.defaultSizes.rowHeight,r=(this._grid.scrollY+this._grid.pageHeight)/this._grid.defaultSizes.rowHeight,a=this._grid.scrollX/this._grid.defaultSizes.columnHeaderHeight,l=(this._grid.scrollX+this._grid.pageWidth)/this._grid.defaultSizes.columnHeaderHeight,d=(t,e)=>t>=i&&t<=r&&e>=a&&e<=l,c=e?-1:1;this._column+=c;for(let i=this._row;e?i>=0:i<n;i+=c){for(let n=this._column;e?n>=0:n<s;n+=c){const e=String(o.data("body",i,n));if(e.match(t)){this._changed.emit(void 0),d(i,n)||this._grid.scrollToRow(i),this._row=i,this._column=n;const o={text:t.source,fragment:e,line:i,column:n,index:this._matches.length};this._matches.push(o)}}this._column=e?s-1:0}return this._matches.length>0&&(this._currentMatch=this._matches[0]),this._matches}get query(){return this._query}highlightNext(t){if(0!==this._matches.length){if(this._currentMatch){let e=t?this._currentMatch.index-1:this._currentMatch.index+1;e=(e+this._matches.length)%this._matches.length,this._currentMatch=this._matches[e]}else this._currentMatch=t?this._matches[this.matches.length-1]:this._matches[0];return this._changed.emit(void 0),this._currentMatch}}}var O,A=o(297);class L{constructor(){this._cemetery={},this._transactions={},this._order=[],this._undoStack=[],this._redoStack=[]}get undoStack(){return this._undoStack}get redoStack(){return this._redoStack}add(t){if(Object.prototype.hasOwnProperty.call(this._transactions,t.id))return!1;this._transactions[t.id]=t,this._order.push(t.id);const e=this._cemetery[t.id];return this._cemetery[t.id]=void 0===e?1:e+1,this._undoStack.push(t.id),!0}get(t){return this._transactions[t]}undo(t){const e=this._cemetery[t];this._cemetery[t]=void 0===e?-1:e-1,C.ArrayExt.removeLastOf(this._undoStack,t),this._redoStack.push(t)}redo(t){const e=this._cemetery[t];this._cemetery[t]=void 0===e?0:e+1,C.ArrayExt.removeLastOf(this._redoStack,t),this._undoStack.push(t)}getHistory(){const t=[];for(const e of this._order)(this._cemetery[e]||0)>0&&t.push(this._transactions[e]);return t}get cemetery(){return this._cemetery}getLastTransaction(){if(0===this._undoStack.length)return;const t=this._undoStack[this._undoStack.length-1];return this.get(t)}getLastUndo(){if(0===this._redoStack.length)return;const t=this._redoStack[this._redoStack.length-1];return this.get(t)}}class T{constructor(t){this._transactionStore=void 0!==t?t:new L}broadcast(t){this._transactionStore.add(t)}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._transactionStore=null,this._onRemoteTransaction=null,this._onUndo=null,this._onRedo=null,this._isDisposed=!0)}get onRemoteTransaction(){return this._onRemoteTransaction}set onRemoteTransaction(t){this._onRemoteTransaction=t}get onUndo(){return this._onUndo}set onUndo(t){this._onUndo=t}get onRedo(){return this._onRedo}set onRedo(t){this._onRedo=t}async undo(t){if(this.onUndo){const e=this._transactionStore.get(t);if(void 0===e)return;this.onUndo(e),this._transactionStore.undo(t)}}async redo(t){if(this.onRedo){const e=this._transactionStore.get(t);if(void 0===e)return;this.onRedo(e),this._transactionStore.redo(t)}}}class k{constructor(t){this._transactionStore=new L,this._adapter=new T(this._transactionStore),this._dataStore=A.Datastore.create(Object.assign(Object.assign({},t),{adapter:this._adapter}))}get id(){return this._dataStore.id}get changed(){return this._dataStore.changed}get isDisposed(){return this._isDisposed}get inTransaction(){return this._dataStore.inTransaction}get version(){return this._dataStore.version}get adapter(){return this._adapter}get cemetery(){return this._transactionStore.cemetery}get transactionStore(){return this._transactionStore}getTransaction(t){return this._transactionStore.get(t)}getHistory(){return this._transactionStore.getHistory()}getLastTransaction(){return this._transactionStore.getLastTransaction()}getLastUndo(){return this._transactionStore.getLastUndo()}beginTransaction(){return this._dataStore.beginTransaction()}endTransaction(){this._dataStore.endTransaction();const t=this.getLastTransaction();if(void 0!==t)return t.id}get(t){return this._dataStore.get(t)}iter(){return this._dataStore.iter()}processMessage(t){this._dataStore.processMessage(t)}dispose(){this.isDisposed||(this._adapter.dispose(),this._dataStore.dispose(),this._transactionStore=null,this._isDisposed=!0)}undo(t){let e;if(void 0===t){const t=this._transactionStore.getLastTransaction();if(void 0===t)return;e=this._dataStore.undo(t.id)}else e=this._dataStore.undo(t);return e}redo(t){let e;if(void 0===t){const t=this._transactionStore.getLastUndo();if(void 0===t)return;e=this._dataStore.redo(t.id)}else e=this._dataStore.redo(t);return e}toString(){return this._dataStore.toString()}getTable(t){return A.Datastore.getTable(this._dataStore,t)}getRecord(t){return A.Datastore.getRecord(this._dataStore,t)}getField(t){return A.Datastore.getField(this._dataStore,t)}updateTable(t,e){A.Datastore.updateTable(this._dataStore,t,e)}updateRecord(t,e){A.Datastore.updateRecord(this._dataStore,t,e)}updateField(t,e){A.Datastore.updateField(this._dataStore,t,e)}listenTable(t,e,o){return A.Datastore.listenTable(this._dataStore,t,e,o)}listenRecord(t,e,o){return A.Datastore.listenRecord(this._dataStore,t,e,o)}listenField(t,e,o){return A.Datastore.listenField(this._dataStore,t,e,o)}withTransaction(t){return A.Datastore.withTransaction(this._dataStore,t)}}class E extends h.BasicSelectionModel{select(t){const e=this.dataModel;e.ghostsRevealed=!1,super.select(t),e.ghostsRevealed=!0}}class W extends h.DataGrid{constructor(t){super(t),this._extraStyle=t.extraStyle||O.defaultExtraStyle}get extraStyle(){return this._extraStyle}set extraStyle(t){this._extraStyle!==t&&(this._extraStyle=Object.assign({},t),this.repaintContent(),this.repaintOverlay())}get ghostRowHeight(){return this.defaultSizes.rowHeight}get ghostColumnWidth(){return this.defaultSizes.columnWidth}selectCells(t){if(!t)return;const{r1:e,r2:o,c1:n,c2:s}=t,i={r1:e,r2:o,c1:n,c2:s,cursorRow:e,cursorColumn:n,clear:"all"};this.selectionModel.select(i)}paintContent(t,e,o,n){super.paintContent(t,e,o,n),this._paintAddons(t,e,o,n)}_paintAddons(t,e,o,n){this._drawGhostRow(t,e,o,n),this._drawGhostRowHeader(t,e,o,n),this._drawGhostColumn(t,e,o,n),this._drawGhostColumnHeader(t,e,o,n),this._drawOverCorner(t,e,o,n);const s=this.dataModel;s&&s.isDataFormatted&&(this._paintDatatypeIcons(t,e,o,n),this.drawCornerHeaderRegion(0,0,this.headerWidth,this.headerHeight))}_drawGhostRow(t,e,o,n){const s=this.bodyWidth-this.scrollX,i=this.defaultSizes.rowHeight;if(s<=0||i<=0)return;const r=this.headerWidth,a=this.headerHeight+this.bodyHeight-i-this.scrollY;if(t+o<=r)return;if(e+n<=a)return;if(t>=r+s)return;if(e>=a+i)return;const l=Math.max(t,r),d=Math.max(e,a),c=Math.min(t+o-1,r+s-1),h=Math.min(e+n-1,a+i-1);this.canvasGC.fillStyle=this._extraStyle.ghostRowColor,this.canvasGC.fillRect(l,d,c-l+1,h-d+1)}_drawGhostColumn(t,e,o,n){const s=this.defaultSizes.columnWidth,i=this.bodyHeight-this.scrollY;if(s<=0||i<=0)return;const r=this.headerWidth+this.bodyWidth-s-this.scrollX,a=this.headerHeight;if(t+o<=r)return;if(e+n<=a)return;if(t>=r+s)return;if(e>=a+i)return;const l=Math.max(t,r),d=Math.max(e,a),c=Math.min(t+o-1,r+s-1),h=Math.min(e+n-1,a+i-1);this.canvasGC.fillStyle=this._extraStyle.ghostColumnColor,this.canvasGC.fillRect(l,d,c-l+1,h-d+1)}_drawGhostRowHeader(t,e,o,n){const s=this.headerWidth,i=this.defaultSizes.rowHeight;if(s<=0||i<=0)return;const r=this.headerHeight+this.bodyHeight-i-this.scrollY;if(t+o<=0)return;if(e+n<=r)return;if(t>=0+s)return;if(e>=r+i)return;const a=t,l=Math.max(e,r),d=Math.min(t+o-1,0+s-1),c=Math.min(e+n-1,r+i-1);this.canvasGC.fillStyle=this._extraStyle.ghostRowColor,this.canvasGC.fillRect(a,l,d-a+1,c-l+1),this._paintGhostRowIcon()}_drawGhostColumnHeader(t,e,o,n){const s=this.defaultSizes.columnWidth,i=this.headerHeight;if(s<=0||i<=0)return;const r=this.headerWidth+this.bodyWidth-s-this.scrollX;if(t+o<=r)return;if(e+n<=0)return;if(t>=r+s)return;if(e>=0+i)return;const a=Math.max(t,r),l=Math.max(e,0),d=Math.min(t+o-1,r+s-1),c=Math.min(e+n-1,0+i-1);this.canvasGC.fillStyle=this._extraStyle.ghostColumnColor,this.canvasGC.fillRect(a,l,d-a+1,c-l+1),this._paintGhostColumnIcon()}_paintGhostRowIcon(){const t=this.defaultSizes.rowHeight,e=this._extraStyle.icons["ghost-row"];if(!e)return;const{icon:o,color:n,size:s,top:i,left:r}=e,a=this.headerHeight+this.bodyHeight-t+i-this.scrollY;this._drawIcon(r,a,s,n,o.svgstr)}_paintGhostColumnIcon(){const t=this.defaultSizes.columnWidth,e=this._extraStyle.icons["ghost-column"];if(!e)return;const{icon:o,color:n,size:s,left:i,top:r}=e,a=this.headerWidth+this.bodyWidth-t+i-this.scrollX;this._drawIcon(a,r,s,n,o.svgstr)}_drawOverCorner(t,e,o,n){const s=this.defaultSizes.columnWidth,i=this.defaultSizes.rowHeight;if(s<=0||i<=0)return;const r=this.headerWidth+this.bodyWidth-s-this.scrollX,a=this.headerHeight+this.bodyHeight-i-this.scrollY;if(t+o<=r)return;if(e+n<=a)return;if(t>=r+s)return;if(e>=a+i)return;const l=Math.max(t,r),d=Math.max(e,a),c=Math.min(t+o-1,r+s-1),h=Math.min(e+n-1,a+i-1);this.canvasGC.fillStyle=this.style.voidColor,this.canvasGC.fillRect(l,d,c-l+1,h-d+1)}_paintDatatypeIcons(t,e,o,n){const s=this.bodyWidth-this.scrollX,i=this.headerHeight;if(s<=0||i<=0)return;const r=this.headerWidth;if(t+o<=r)return;if(e+n<=0)return;if(t>=r+s)return;if(e>=0+i)return;const a=this.bodyWidth,l=this.pageWidth,d=Math.max(t,r),c=e;let h=Math.min(t+o-1,r+s-1);const u=Math.min(e+n-1,0+i-1),g=this.columnHeaderSections.indexOf(c),m=this.columnSections.indexOf(d-r+this.scrollX);let _=this.columnHeaderSections.indexOf(u),p=this.columnSections.indexOf(h-r+this.scrollX);const w=this.columnHeaderSections.count-1,C=this.columnSections.count-1;_<0&&(_=w),p<0&&(p=C);const b=this.columnSections.offsetOf(m)+r-this.scrollX,y=this.columnHeaderSections.offsetOf(g);let S=0,f=0;const v=new Array(_-g+1),M=new Array(p-m+1);for(let t=g;t<=_;++t){const e=this.columnHeaderSections.sizeOf(t);v[t-g]=e,f+=e}for(let t=m;t<=p;++t){const e=this.columnSections.sizeOf(t);M[t-m]=e,S+=e}if(this.stretchLastColumn&&l>a&&p===C){const t=this.pageWidth-this.bodyWidth;M[M.length-1]+=t,S+=t,h+=t}const x={region:"column-header",xMin:d,yMin:c,xMax:h,yMax:u,x:b,y,width:S,height:f,row:g,column:m,rowSizes:v,columnSizes:M};for(let t=x.x,e=0,o=x.columnSizes.length;e<o;++e){const o=x.columnSizes[e];if(x.column+e+1===this.dataModel.columnCount("body"))return;if(0===o)continue;const n=this.dataModel.dataTypes[x.column+e],s=this._extraStyle.icons[n.type];if(!s)continue;const{icon:i,color:r,size:a,left:l,top:d}=s;this._drawIcon(t+l,y+d,a,r,i.svgstr),t+=o}}_drawIcon(t,e,o,n,s){const{defaultSize:i,path:r}=O.parseSVG(s),a=o/i,l=new Path2D(r),d=this.canvasGC.getTransform();this.canvasGC.translate(t,e),this.canvasGC.scale(a,a),this.canvasGC.fillStyle=n,this.canvasGC.fill(l,"nonzero"),this.canvasGC.setTransform(d)}}!function(t){t.parseSVG=function(t){let e=/viewBox="(.+?)"/;const o=t.match(e)[1].split(" ").map((t=>parseInt(t)));return e=/path d="(.+?)"/,{defaultSize:o[2],path:t.match(e)[1]}},t.defaultExtraStyle={ghostRowColor:"rgba(243, 243, 243, 0.80)",ghostColumnColor:"rgba(243, 243, 243, 0.80)",icons:{"ghost-column":{icon:c.addIcon,color:"#616161",size:18,left:63,top:9},"ghost-row":{icon:c.addIcon,color:"#bdbdbd",size:12,left:26,top:6}}}}(O||(O={}));var F=o(637);class U extends h.BasicKeyHandler{onKeyDown(t,e){const o=(0,F.getKeyboardLayout)().keyForKeydownEvent(e);if("Backspace"===o||"Delete"===o)return e.stopPropagation(),e.preventDefault(),void this.onDelete(t,e);super.onKeyDown(t,e)}onDelete(t,e){const o=t.selectionModel.currentSelection(),n=t.dataModel,s=n.clearCells("body",o);n.onChangedSignal.emit(s)}}const B="jp-mod-dirty";class G extends p.Widget{constructor(t){super(),this._monitor=null,this._delimiter=",",this._revealed=new m.PromiseDelegate,this._baseRenderer=null,this._dirty=!1,this._commandSignal=new _.Signal(this);const e=this._context=t.context,o=this.layout=new p.PanelLayout;this.addClass("jp-CSVViewer"),this._grid=new W({defaultSizes:{rowHeight:21,columnWidth:100,rowHeaderWidth:60,columnHeaderHeight:24},headerVisibility:"all"}),this._grid.addClass("jp-CSVViewer-grid");const n=new U;this._grid.keyHandler=n,this._grid.copyConfig={separator:"\t",format:h.DataGrid.copyFormatGeneric,headers:"none",warningThreshold:1e6},o.addWidget(this._grid);const s=new D({grid:this._grid});this._grid.mouseHandler=s,s.mouseUpSignal.connect(this._onMouseUp,this),s.hoverSignal.connect(this._onMouseHover,this),this._searchService=new I(this._grid),this._searchService.changed.connect(this._updateRenderer,this),this._background=f.VirtualDOM.realize(f.h.div({className:"jp-background",style:{position:"absolute",zIndex:"1"}})),this._rowHeader=f.VirtualDOM.realize(f.h.div({className:"jp-row-header",style:{position:"absolute",zIndex:"2"}})),this._columnHeader=f.VirtualDOM.realize(f.h.div({className:"jp-column-header",style:{position:"absolute",zIndex:"2"}})),this._grid.viewport.node.appendChild(this._rowHeader),this._grid.viewport.node.appendChild(this._columnHeader),this._grid.viewport.node.appendChild(this._background),this._context.ready.then((()=>{this._updateGrid(),this._revealed.resolve(void 0),this._monitor=new u.ActivityMonitor({signal:e.model.contentChanged,timeout:1e3}),this._monitor.activityStopped.connect(this._updateGrid,this)})),this._grid.editingEnabled=!0,this.commandSignal.connect(this._onCommand,this)}get ghostRow(){return this._ghostRow}get ghostColumn(){return this._ghostColumn}get ghostCorner(){return this._ghostCorner}get context(){return this._context}get revealed(){return this._revealed.promise}get delimiter(){return this._delimiter}set delimiter(t){t!==this._delimiter&&(this._delimiter=t,this._updateGrid())}get style(){return this._grid.style}set style(t){this._grid.style=t}get extraStyle(){return this._grid.extraStyle}set extraStyle(t){this._grid.extraStyle=t}set rendererConfig(t){this._baseRenderer=t,this._updateRenderer()}get searchService(){return this._searchService}get grid(){return this._grid}get dataModel(){return this._grid.dataModel}get litestore(){return this._litestore}get commandSignal(){return this._commandSignal}get dirty(){return this._dirty}set dirty(t){this._dirty=t,this.dirty&&!this.title.className.includes(B)?this.title.className+=B:this.dirty||(this.title.className=this.title.className.replace(B,""))}get rowsSelected(){const t=this._grid.selectionModel.currentSelection();if(!t)return 0;const{r1:e,r2:o}=t;return Math.abs(o-e)+1}get columnsSelected(){const t=this._grid.selectionModel.currentSelection();if(!t)return 0;const{c1:e,c2:o}=t;return Math.abs(o-e)+1}dispose(){this._monitor&&this._monitor.dispose(),super.dispose()}goToLine(t){this._grid.scrollToRow(t)}onActivateRequest(t){this.node.tabIndex=-1,this.node.focus()}_guessRowDelimeter(t){const e=t.slice(0,5e3).indexOf("\r");return-1===e?"\n":"\n"===t[e+1]?"\r\n":"\r"}_countOccurrences(t,e,o){let n=0,s=0;const i=e.length,r=t.slice(0,t.indexOf(o));for(s=r.indexOf(e,s);-1!==s;)n++,s+=i,s=r.indexOf(e,s);return n+1}_buildColHeader(t){const e=this._context.model.toString(),o="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=this._guessRowDelimeter(e),s=this._countOccurrences(e,t,n);if(s<=26)return o.slice(0,s).split("").join(t)+n;{let e=o.split("").join(t);for(let o=27;o<s;o++)e+=t+H(o);return e+n}}_updateGrid(){if(this.dataModel)return;const t=this.delimiter,e=this._context.model.toString(),o=this._grid.dataModel=new y({data:e,delimiter:t});this._grid.selectionModel=new E({dataModel:o}),this._litestore=new k({id:0,schemas:[G.DATAMODEL_SCHEMA]}),o.litestore=this._litestore;const n={},s={index:0,remove:0,values:(0,C.toArray)((0,C.range)(0,this.dataModel.totalRows))},i={index:0,remove:0,values:(0,C.toArray)((0,C.range)(0,this.dataModel.totalColumns))};n.rowUpdate=s,n.columnUpdate=i,n.type="init",this.updateModel(n),o.onChangedSignal.connect(this._onModelSignal,this),o.isDataFormattedChanged.connect(this._updateRenderer,this),this._updateContextElements()}_updateRenderer(){if(null===this._baseRenderer)return;const t=this.dataModel&&this.dataModel.isDataFormatted,e=this._baseRenderer,o=new h.TextRenderer({textColor:e.textColor,horizontalAlignment:t?this.cellHorizontalAlignmentRendererFunc():e.horizontalAlignment,backgroundColor:this._searchService.cellBackgroundColorRendererFunc(e),font:"11px sans-serif"}),n=new h.TextRenderer({textColor:e.textColor,horizontalAlignment:"center",backgroundColor:this._searchService.cellBackgroundColorRendererFunc(e),font:"11px sans-serif"}),s=new R({textColor:e.textColor,horizontalAlignment:t?"left":"center",backgroundColor:this._searchService.cellBackgroundColorRendererFunc(e),font:"11px sans-serif",indent:25,dataDetection:t});this._grid.cellRenderers.update({body:o,"column-header":s,"corner-header":o,"row-header":n})}cellHorizontalAlignmentRendererFunc(){return({region:t,row:e,column:o})=>{const{type:n}=this.dataModel.dataTypes[o];return"body"!==t||"boolean"===n?"center":"number"===n||"integer"===n?"right":"left"}}_onModelSignal(t,e){this.updateModel(e)}async save(t=!1){const e=this.dataModel.updateString();this.context.model.fromString(e),t?await this.context.save():this.context.save(),this.dirty=!1}_onCommand(t,e){const o=this._grid.selectionModel.currentSelection(),n=this.rowsSelected,s=this.columnsSelected;let i,r,a,l;o&&(i=Math.min(o.r1,o.r2),r=Math.max(o.r1,o.r2),a=Math.min(o.c1,o.c2),l=Math.max(o.c1,o.c2));let d=null;switch(e){case"insert-rows-above":d=this.dataModel.addRows("body",i,n);break;case"insert-rows-below":d=this.dataModel.addRows("body",r+1,n),i+=n,r+=n;break;case"insert-columns-left":d=this.dataModel.addColumns("body",a,s);break;case"insert-columns-right":d=this.dataModel.addColumns("body",l+1,s),a+=s,l+=s;break;case"remove-rows":d=this.dataModel.removeRows("body",i,n);break;case"remove-columns":d=this.dataModel.removeColumns("body",a,s);break;case"cut-cells":this._grid.copyToClipboard(),d=this.dataModel.cut("body",i,a,r,l);break;case"copy-cells":this._grid.copyToClipboard(),this.dataModel.copy("body",i,a,r,l);break;case"paste-cells":d=this.dataModel.paste("body",i,a),this._cancelEditing();break;case"clear-cells":d=this.dataModel.clearCells("body",{r1:i,r2:r,c1:a,c2:l});break;case"clear-rows":{const t=Math.abs(i-r)+1;d=this.dataModel.clearRows("body",i,t);break}case"clear-columns":{const t=Math.abs(a-l)+1;d=this.dataModel.clearColumns("body",a,t);break}case"undo":{if(1===this._litestore.transactionStore.undoStack.length)return;const{gridState:t,selection:e}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID});this._litestore.undo(),this.dataModel.emitOppositeChange(t),this._grid.selectCells(e);break}case"redo":{if(0===this._litestore.transactionStore.redoStack.length)return;this._litestore.redo();const{gridState:t,selection:e}=this._litestore.getRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID});if(this.dataModel.emitCurrentChange(t.nextChange),!e)break;const o=t.nextCommand,i=t.nextChange;let r,{r1:a,r2:l,c1:d,c2:c}=e;"insert-rows-below"===o?(a+=n,l+=n):"insert-columns-right"===o?(d+=s,c+=s):"move-rows"===o?(r=i,a=r.destination,l=r.destination):"move-columns"===o&&(r=i,d=r.destination,c=r.destination),this._grid.selectCells({r1:a,r2:l,c1:d,c2:c});break}case"save":this.save()}d&&(d.selection=o,d.gridStateUpdate.nextCommand=e,this._grid.selectCells({r1:i,r2:r,c1:a,c2:l})),this.updateModel(d)}updateModel(t){if(t){if(t.selection||(t.selection=this._grid.selectionModel.currentSelection()),this._litestore.beginTransaction(),this._litestore.updateRecord({schema:G.DATAMODEL_SCHEMA,record:G.RECORD_ID},{rowMap:t.rowUpdate||G.NULL_NUM_SPLICE,columnMap:t.columnUpdate||G.NULL_NUM_SPLICE,valueMap:t.valueUpdate||null,selection:t.selection||null,gridState:t.gridStateUpdate||null}),this._litestore.endTransaction(),"init"===t.type)return;this.dirty=!0}this.dataModel.isDataFormatted&&(this.dataModel.dataTypes=this.dataModel.resetMetadata(),this._updateRenderer())}getSelectedRange(){const t=(0,C.toArray)(this._grid.selectionModel.selections());if(0!==t.length)return t[0]}onAfterAttach(t){super.onAfterAttach(t),this.node.addEventListener("paste",this._handlePaste.bind(this))}_handlePaste(t){const e=t.clipboardData.getData("text/plain");t.preventDefault(),t.stopPropagation();const{r1:o,r2:n,c1:s,c2:i}=this.getSelectedRange(),r=Math.min(o,n),a=Math.min(s,i),l=this.dataModel.paste("body",r,a,e);this._cancelEditing(),this.updateModel(l)}_cancelEditing(){this._grid.editorController.cancel()}_updateContextElements(){const t=this._grid.rowSize("body",this._grid.rowCount("body")-1),e=this._grid.columnSize("body",this._grid.columnCount("body")-1);this._background.style.width=this._grid.bodyWidth-e+"px",this._background.style.height=this._grid.bodyHeight-t+"px",this._background.style.left=`${this._grid.headerWidth}px`,this._background.style.top=`${this._grid.headerHeight}px`,this._columnHeader.style.left=`${this._grid.headerWidth}px`,this._columnHeader.style.height=`${this._grid.headerHeight}px`,this._columnHeader.style.width=`${this._grid.bodyWidth}px`,this._rowHeader.style.top=`${this._grid.headerHeight}px`,this._rowHeader.style.width=`${this._grid.headerWidth}px`,this._rowHeader.style.height=`${this._grid.bodyHeight}px`}_onMouseUp(t,e){this._updateContextElements()}_onMouseHover(t,e){const o=Object.assign({},this._grid.extraStyle);switch("#F3F3F3"===this.grid.style.voidColor?(o.ghostColumnColor=et.ghostColumnColor,o.ghostRowColor=et.ghostRowColor):(o.ghostColumnColor=ot.ghostColumnColor,o.ghostRowColor=ot.ghostRowColor),e){case null:break;case"ghost-row":o.ghostRowColor="rgba(0, 0, 0, 0)";break;case"ghost-column":o.ghostColumnColor="rgba(0, 0, 0, 0)"}this._grid.extraStyle=o}}!function(t){t.SCHEMA_ID="datamodel",t.RECORD_ID="datamodel",t.DATAMODEL_SCHEMA={id:t.SCHEMA_ID,fields:{rowMap:A.Fields.List(),columnMap:A.Fields.List(),valueMap:A.Fields.Map(),selection:A.Fields.Register({value:null}),gridState:A.Fields.Register({value:null}),type:A.Fields.String()}},t.NULL_NUMS=[],t.NULL_NUM_SPLICE={index:0,remove:0,values:t.NULL_NUMS},t.NULL_CHANGE=[],t.NULL_CHANGE_SPLICE={index:0,remove:0,values:t.NULL_CHANGE}}(G||(G={}));class z extends g.DocumentWidget{constructor(t){let{content:e,reveal:o}=t;const{context:n,commandRegistry:s}=t,r=function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(o[n[s]]=t[n[s]])}return o}(t,["context","commandRegistry"]);e=e||new G({context:n}),o=Promise.all([o,e.revealed]),super(Object.assign({context:n,content:e,reveal:o},r));const a=s,{save:l,undo:d,redo:c,cutToolbar:h,copyToolbar:u,pasteToolbar:g}=st;this.toolbar.addItem("save",new i.CommandToolbarButton({commands:a,id:l})),this.toolbar.addItem("undo",new i.CommandToolbarButton({commands:a,id:d})),this.toolbar.addItem("redo",new i.CommandToolbarButton({commands:a,id:c})),this.toolbar.addItem("cut",new i.CommandToolbarButton({commands:a,id:h})),this.toolbar.addItem("copy",new i.CommandToolbarButton({commands:a,id:u})),this.toolbar.addItem("paste",new i.CommandToolbarButton({commands:a,id:g})),this.toolbar.addItem("spacer",i.Toolbar.createSpacerItem()),this.toolbar.addItem("format-data",new i.ToolbarButton({label:"Format Data",iconClass:"jp-ToggleSwitch",tooltip:"Click to format the data based on the column type",onClick:()=>this.toggleDataDetection()}))}toggleDataDetection(){const t=this.content.dataModel.isDataFormatted;t?this.node.removeAttribute("isDataFormatted"):this.node.setAttribute("isDataFormatted","true"),this.content.dataModel.isDataFormatted=!t}async dispose(){if(this.content.dirty&&!this.isDisposed){const t=function(t){const e=t.context.path,o=e.lastIndexOf("/"),n=e.substring(o+1);return new i.Dialog({title:"Save Your Changes?",body:`Your changes to "${n}" will be lost if you don't save them.`,buttons:[i.Dialog.warnButton({label:"Don't Save"}),i.Dialog.cancelButton(),i.Dialog.okButton({label:"Save"})]})}(this.content),e=await t.launch();if(t.dispose(),"Cancel"===e.button.label)return;"Save"===e.button.label&&await this.content.save(!0)}super.dispose()}setFragment(t){const e=t.split("=");if("#row"!==e[0])return;let o=e[1].split(";")[0];o=o.split("-")[0],this.context.ready.then((()=>{this.content.goToLine(Number(o))}))}}class j extends g.ABCWidgetFactory{constructor(t,e){super(t),this._commandReigstry=e}createNewWidget(t){const e=this._commandReigstry;return new z({context:t,commandRegistry:e})}}class N{constructor(){this.isReadOnly=!1,this._matches=[],this._changed=new _.Signal(this)}static canSearchOn(t){return t instanceof g.DocumentWidget&&t.content instanceof G}getInitialQuery(t){return null}async startQuery(t,e){return this._target=e,this._query=t,e.content.dataModel.onChangedSignal.connect(this.rerunSearch,this),e.content.searchService.find(t),this._matches=e.content.searchService.matches,this._currentMatch=e.content.searchService.currentMatch,this.moveToCell(),this._matches}async endQuery(){this._matches=[],this._currentMatch=null,this._target.content.dataModel.changed.disconnect(this.rerunSearch,this),this._target.content.searchService.clear()}async endSearch(){this._target.content.searchService.clear(),this._target.content.dataModel.changed.disconnect(this.rerunSearch,this),this._query=void 0}async highlightNext(){return this._currentMatch=this._target.content.searchService.highlightNext(!1),this.moveToCell(),this._currentMatch}async highlightPrevious(){return this._currentMatch=this._target.content.searchService.highlightNext(!0),this.moveToCell(),this._currentMatch}async replaceCurrentMatch(t,e){const{line:o,column:n}=this._target.content.searchService.currentMatch;return this._target.content.dataModel.setData("body",o,n,t,1,1,e),!0}async replaceAllMatches(t){const e=this._target.content.dataModel,o=[],n=[];let s=0;for(;s<this.matches.length;){const{line:t,column:e}=this.matches[s];o.push(t),n.push(e),s++}this.moveToCell();const i=e.bulkSetData(o,n,t);return e.onChangedSignal.emit(i),!0}rerunSearch(){return this.endQuery(),this.startQuery(this._query,this._target),this._changed.emit(void 0),this.moveToCell(),!0}moveToCell(){if(this._target&&this._currentMatch){const{line:t,column:e}=this._currentMatch;this._target.content.grid.selectCells({r1:t,r2:t,c1:e,c2:e});const o=this._target.content.grid.rowOffset("body",t),n=this._target.content.grid.columnOffset("body",e);this._target.content.grid.scrollTo(n,o)}}get changed(){return this._changed}get matches(){return this._matches?this._matches.map((t=>Object.assign({},t))):this._matches}get currentMatchIndex(){return this._currentMatch?this._currentMatch.index:null}get currentMatch(){return this._currentMatch}}const X='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M19 19H5V8H19V19ZM16 1V3H8V1H6V3H5C3.89 3 3 3.89 3 5V19C3 19.5304 3.21071 20.0391 3.58579 20.4142C3.96086 20.7893 4.46957 21 5 21H19C19.5304 21 20.0391 20.7893 20.4142 20.4142C20.7893 20.0391 21 19.5304 21 19V5C21 4.46957 20.7893 3.96086 20.4142 3.58579C20.0391 3.21071 19.5304 3 19 3H18V1" fill="black"/>\n</svg>\n',V='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M10 17L5 12L6.41 10.58L10 14.17L17.59 6.58L19 8L10 17ZM19 3H5C3.89 3 3 3.89 3 5V19C3 19.5304 3.21071 20.0391 3.58579 20.4142C3.96086 20.7893 4.46957 21 5 21H19C19.5304 21 20.0391 20.7893 20.4142 20.4142C20.7893 20.0391 21 19.5304 21 19V5C21 4.46957 20.7893 3.96086 20.4142 3.58579C20.0391 3.21071 19.5304 3 19 3Z" fill="black"/>\n</svg>\n',Y='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3 5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5ZM7 18H9L9.35 16H13.35L13 18H15L15.35 16H17.35L17.71 14H15.71L16.41 10H18.41L18.76 8H16.76L17.12 6H15.12L14.76 8H10.76L11.12 6H9.12L8.76 8H6.76L6.41 10H8.41L7.71 14H5.71L5.35 16H7.35L7 18ZM10.41 10H14.41L13.71 14H9.71L10.41 10Z" fill="black"/>\n</svg>\n',P='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3 5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5ZM12.5 11H11.5C11.1022 11 10.7206 10.842 10.4393 10.5607C10.158 10.2794 10 9.89782 10 9.5C10 9.10218 10.158 8.72064 10.4393 8.43934C10.7206 8.15804 11.1022 8 11.5 8H12.5C12.8978 8 13.2794 8.15804 13.5607 8.43934C13.842 8.72064 14 9.10218 14 9.5H16C16 8.57174 15.6313 7.6815 14.9749 7.02513C14.3185 6.36875 13.4283 6 12.5 6H11.5C10.5717 6 9.6815 6.36875 9.02513 7.02513C8.36875 7.6815 8 8.57174 8 9.5C8 10.4283 8.36875 11.3185 9.02513 11.9749C9.6815 12.6313 10.5717 13 11.5 13H12.5C12.8978 13 13.2794 13.158 13.5607 13.4393C13.842 13.7206 14 14.1022 14 14.5C14 14.8978 13.842 15.2794 13.5607 15.5607C13.2794 15.842 12.8978 16 12.5 16H11.5C11.1022 16 10.7206 15.842 10.4393 15.5607C10.158 15.2794 10 14.8978 10 14.5H8C8 15.4283 8.36875 16.3185 9.02513 16.9749C9.6815 17.6313 10.5717 18 11.5 18H12.5C13.4283 18 14.3185 17.6313 14.9749 16.9749C15.6313 16.3185 16 15.4283 16 14.5C16 13.5717 15.6313 12.6815 14.9749 12.0251C14.3185 11.3687 13.4283 11 12.5 11Z" fill="black"/>\n</svg>\n',$="Tabular Data Editor";function K(t,e,o){e.forEach((e=>{"separator"===e?t.contextMenu.addItem({type:"separator",selector:o}):t.contextMenu.addItem({command:st[e],selector:o})}))}const q=[{id:"jupyterlab-tabular-data-editor",autoStart:!0,activate:function(t,e,o,n,s,r,a){const l=new j({name:$,fileTypes:["csv"],defaultFor:["csv"],readOnly:!0},t.commands),d=new i.WidgetTracker({namespace:"editablecsvviewer"});let h=nt.LIGHT_STYLE;const u=et;let g=nt.LIGHT_TEXT_CONFIG;n&&n.restore(d,{command:"docmanager:open",args:t=>({path:t.context.path,factory:$}),name:t=>t.context.path}),t.docRegistry.addWidgetFactory(l);const m=t.docRegistry.getFileType("csv");l.widgetCreated.connect(((t,e)=>{d.add(e),e.context.pathChanged.connect((()=>{d.save(e)})),m&&(e.title.icon=m.icon,e.title.iconClass=m.iconClass||"",e.title.iconLabel=m.iconLabel||""),e.content.style=h,e.content.rendererConfig=g,e.content.extraStyle=u}));s&&s.themeChanged.connect((()=>{const t=!s||!s.theme||s.isLight(s.theme);h=t?nt.LIGHT_STYLE:nt.DARK_STYLE;const e=t?et:ot;g=t?nt.LIGHT_TEXT_CONFIG:nt.DARK_TEXT_CONFIG,d.forEach((t=>{t.content.style=h,t.content.extraStyle=e,t.content.rendererConfig=g}))})),a&&a.register("csv",N),function(t,e,o){const{commands:n}=t,s=".jp-CSVViewer-grid";n.addCommand(st.createNewCSV,{label:t=>t.isPalette?"New CSV File":"CSV File",caption:"Create a new CSV file",icon:t=>t.isPalette?null:c.spreadsheetIcon,execute:async t=>{const e=t.cwd||o.defaultBrowser.model.path,s=await n.execute("docmanager:new-untitled",{path:e,type:"file",ext:"csv"});return n.execute("docmanager:open",{path:s.path,factory:$})}}),n.addCommand(st.insertRowsAbove,{label:()=>{const t=e.currentWidget.content.rowsSelected;return 1===t?"Insert Row Above":`Insert ${t} Rows Above`},execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("insert-rows-above")}}),n.addCommand(st.insertRowsBelow,{label:()=>{const t=e.currentWidget.content.rowsSelected;return 1===t?"Insert Row Below":`Insert ${t} Rows Below`},execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("insert-rows-below")}}),n.addCommand(st.removeRows,{label:()=>{const t=e.currentWidget.content.rowsSelected;return 1===t?"Remove Row":`Remove ${t} Rows`},execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("remove-rows")}}),n.addCommand(st.insertColumnsLeft,{label:()=>{const t=e.currentWidget.content.columnsSelected;return 1===t?"Insert Column Left":`Insert ${t} Columns Left`},execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("insert-columns-left")}}),n.addCommand(st.insertColumnsRight,{label:()=>{const t=e.currentWidget.content.columnsSelected;return 1===t?"Insert Column Right":`Insert ${t} Columns Right`},execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("insert-columns-right")}}),n.addCommand(st.removeColumns,{label:()=>{const t=e.currentWidget.content.columnsSelected;return 1===t?"Remove Column":`Remove ${t} Columns`},execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("remove-columns")}}),n.addCommand(st.copyToolbar,{icon:c.copyIcon,iconLabel:"Copy",className:"jp-toolbar-copy",caption:"Copy",execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("copy-cells")}}),n.addCommand(st.cutToolbar,{icon:c.cutIcon,iconLabel:"Cut",className:"jp-toolbar-cut",caption:"Cut",execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("cut-cells")}}),n.addCommand(st.pasteToolbar,{icon:c.pasteIcon,iconLabel:"Paste",className:"jp-toolbar-paste",caption:"Paste",execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("paste-cells")}}),n.addCommand(st.copyContextMenu,{label:"Copy",execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("copy-cells")}}),n.addCommand(st.cutContextMenu,{label:"Cut",execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("cut-cells")}}),n.addCommand(st.pasteContextMenu,{label:"Paste",execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("paste-cells")}}),n.addCommand(st.undo,{icon:c.undoIcon,iconLabel:"Undo",className:"jp-toolbar-undo",caption:"Undo",execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("undo")}}),n.addCommand(st.redo,{icon:c.redoIcon,iconLabel:"Redo",className:"jp-toolbar-redo",caption:"Redo",execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("redo")}}),n.addCommand(st.save,{icon:c.saveIcon,iconLabel:"Save",className:"jp-toolbar-save",caption:"Save",execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("save")}}),n.addCommand(st.clearCells,{label:"Clear Contents",execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("clear-cells")}}),n.addCommand(st.clearColumns,{label:"Clear Columns",execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("clear-columns")}}),n.addCommand(st.clearRows,{label:"Clear Rows",execute:()=>{e.currentWidget&&e.currentWidget.content.commandSignal.emit("clear-rows")}});const i=["cutContextMenu","copyContextMenu","pasteContextMenu","separator"],r=[...i,"insertRowsAbove","insertRowsBelow","separator","removeRows","clearCells"],a=[...i,"insertColumnsLeft","insertColumnsRight","separator","removeColumns","clearColumns"],l=[...i,"insertRowsAbove","insertRowsBelow","separator","removeRows","clearRows"];K(t,r,".jp-background"),K(t,a,".jp-column-header"),K(t,l,".jp-row-header"),t.commands.addKeyBinding({command:st.copyContextMenu,args:{},keys:["Accel C"],selector:s}),t.commands.addKeyBinding({command:st.save,args:{},keys:["Accel S"],selector:s}),t.commands.addKeyBinding({command:st.cutContextMenu,args:{},keys:["Accel X"],selector:s}),t.commands.addKeyBinding({command:st.undo,args:{},keys:["Accel Z"],selector:s}),t.commands.addKeyBinding({command:st.redo,args:{},keys:["Accel Shift Z"],selector:s})}(t,d,e),o&&o.add({command:st.createNewCSV})},requires:[a.IFileBrowserFactory],optional:[l.ILauncher,s.ILayoutRestorer,i.IThemeManager,d.IMainMenu,r.ISearchProviderRegistry]}],Z={rowHeight:21,columnWidth:100,rowHeaderWidth:60,columnHeaderHeight:24},Q={colorLight:"#1e88e5",colorDark:"#2196f3",position:{size:15,left:2,top:Z.columnHeaderHeight/2-7.5+.5}},J={colorLight:"#616161",colorDark:"#bdbdbd",position:{size:16,left:Z.columnWidth/2-8,top:Z.columnHeaderHeight/2-8}},tt={colorLight:"#616161",colorDark:"#bdbdbd",position:{size:12,left:Z.rowHeaderWidth/2-6,top:Z.rowHeight/2-6}},et={ghostRowColor:"rgba(243, 243, 243, 0.80)",ghostColumnColor:"rgba(243, 243, 243, 0.80)",icons:{"ghost-column":Object.assign({icon:c.addIcon,color:J.colorLight},J.position),"ghost-row":Object.assign({icon:c.addIcon,color:tt.colorLight},tt.position),string:Object.assign({icon:new c.LabIcon({name:"tde:string",svgstr:P}),color:Q.colorLight},Q.position),integer:Object.assign({icon:new c.LabIcon({name:"tde:number",svgstr:Y}),color:Q.colorLight},Q.position),number:Object.assign({icon:new c.LabIcon({name:"tde:number",svgstr:Y}),color:Q.colorLight},Q.position),boolean:Object.assign({icon:new c.LabIcon({name:"tde:checkbox",svgstr:V}),color:Q.colorLight},Q.position),date:Object.assign({icon:new c.LabIcon({name:"tde:date",svgstr:X}),color:Q.colorLight},Q.position)}},ot={ghostRowColor:"rgba(0, 0, 0, 0.65)",ghostColumnColor:"rgba(0, 0, 0, 0.65)",icons:{"ghost-column":Object.assign({icon:c.addIcon,color:J.colorDark},J.position),"ghost-row":Object.assign({icon:c.addIcon,color:tt.colorDark},tt.position),string:Object.assign({icon:new c.LabIcon({name:"tde:string",svgstr:P}),color:Q.colorDark},Q.position),integer:Object.assign({icon:new c.LabIcon({name:"tde:number",svgstr:Y}),color:Q.colorDark},Q.position),number:Object.assign({icon:new c.LabIcon({name:"tde:number",svgstr:Y}),color:Q.colorLight},Q.position),boolean:Object.assign({icon:new c.LabIcon({name:"tde:checkbox",svgstr:V}),color:Q.colorDark},Q.position),date:Object.assign({icon:new c.LabIcon({name:"tde:date",svgstr:X}),color:Q.colorDark},Q.position)}};var nt;!function(t){t.LIGHT_STYLE=Object.assign(Object.assign({},h.DataGrid.defaultStyle),{voidColor:"#F3F3F3",backgroundColor:"white",headerBackgroundColor:"#EEEEEE",gridLineColor:"rgba(20, 20, 20, 0.15)",headerGridLineColor:"rgba(20, 20, 20, 0.25)",selectionBorderColor:"rgb(33,150,243)",cursorBorderColor:"rgb(33,150,243)",headerSelectionBorderColor:"rgb(33,150,243, 0)"}),t.DARK_STYLE=Object.assign(Object.assign({},h.DataGrid.defaultStyle),{voidColor:"black",backgroundColor:"#111111",headerBackgroundColor:"#424242",gridLineColor:"rgba(235, 235, 235, 0.15)",headerGridLineColor:"rgba(235, 235, 235, 0.25)",headerSelectionFillColor:"rgba(20, 20, 20, 0.25)"}),t.LIGHT_TEXT_CONFIG={textColor:"#111111",matchBackgroundColor:"#FAE480",currentMatchBackgroundColor:"#F5C800",horizontalAlignment:"left"},t.DARK_TEXT_CONFIG={textColor:"#F5F5F5",matchBackgroundColor:"rgba(0, 84, 168, 0.5)",currentMatchBackgroundColor:"#0055AA",horizontalAlignment:"left"}}(nt||(nt={}));const st={createNewCSV:"tde-create-new-csv",insertColumnsLeft:"tde:insert-columns-left",insertColumnsRight:"tde:insert-columns-right",insertRowsAbove:"tde:insert-rows-above",insertRowsBelow:"tde:insert-rows-below",removeRows:"tde-remove-row",removeColumns:"tde:remove-column",copyContextMenu:"tde:copy",cutContextMenu:"tde:cut",pasteContextMenu:"tde:paste-cm",copyToolbar:"tde:copy-tb",cutToolbar:"tde:cut-tb",pasteToolbar:"tde:paste-tb",undo:"tde:undo",redo:"tde:redo",save:"tde-save",clearCells:"tde-clear-contents",clearColumns:"tde-clear-columns",clearRows:"tde-clear-rows"}}}]);